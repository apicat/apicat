var v=Object.defineProperty,x=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var C=(n,a,e)=>a in n?v(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e,p=(n,a)=>{for(var e in a||(a={}))T.call(a,e)&&C(n,e,a[e]);if(b)for(var e of b(a))k.call(a,e)&&C(n,e,a[e]);return n},m=(n,a)=>x(n,P(a));import{K as z,L as K,M as B,v as L}from"./element-plus.ccbabc0c.js";import{c as N,u as A}from"./index.e7051a6c.js";import{o,h as c,T as D,Y as g,Z as E,V as i,W as S,at as M,L as w,$ as V,a5 as j,bA as F,y as I,ap as O}from"./vendor.4578470d.js";import{u as R}from"./usePage.11ff97df.js";const U={name:"AcTable",props:{isShowIndex:{type:Boolean,default:!1},isShowSelection:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},tableData:{type:Array,default:()=>[]},pageSize:{type:Number,default:()=>15},pageTotal:{type:Number,default:()=>0},pageCount:{type:Number,default:()=>0},currentPage:{type:Number,default:()=>1},loading:{type:Boolean,default:!1},isShowPager:{type:Boolean,default:!0},emptyText:{type:String,default:"\u6682\u65E0\u6570\u636E"},dataKey:{type:Object,default:()=>({label:"title",prop:"key"})}},setup(n,a){const{emit:e}=a;return{handleSizeChange:l=>e("size-change",l),handleCurrentChange:l=>{e("update:currentPage",n.currentPage),e("current-change",l)},handleSelectionChange:l=>e("selection-change",l)}}},W={class:"ac-table"},Y={key:0,class:"mt-4 flex justify-end"};function Z(n,a,e,s,h,y){const l=z,f=K,r=B,d=L;return o(),c("div",W,[D((o(),g(f,{data:e.tableData,"empty-text":e.emptyText,onSelectionChange:s.handleSelectionChange},{default:E(()=>[e.isShowIndex?(o(),g(l,{key:0,type:"index",width:"50",label:"\u5E8F\u53F7"})):i("",!0),e.isShowSelection?(o(),g(l,{key:1,type:"selection",width:"55"})):i("",!0),(o(!0),c(S,null,M(e.columns,t=>(o(),c(S,{key:t.prop},[t[e.dataKey.label]&&!t.slot?(o(),g(l,{key:0,prop:t[e.dataKey.prop],"show-overflow-tooltip":"",label:t[e.dataKey.label],formatter:t.render||t.formatter,width:t.width},null,8,["prop","label","formatter","width"])):i("",!0),t.slot&&t[e.dataKey.label]?w(n.$slots,t.slot,{key:1}):i("",!0)],64))),128)),w(n.$slots,"operation")]),_:3},8,["data","empty-text","onSelectionChange"])),[[d,e.loading]]),e.isShowPager&&e.pageTotal?(o(),c("div",Y,[V(r,{"page-size":e.pageSize,layout:"prev, pager, next",total:e.pageTotal,"current-page":e.currentPage,"onUpdate:current-page":a[0]||(a[0]=t=>e.currentPage=t),onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange},null,8,["page-size","total","current-page","onSizeChange","onCurrentChange"])])):i("",!0)])}var X=N(U,[["render",Z]]);const $=(n,a={isLoaded:!0,dataKey:"data",totalKey:"total",transform:null})=>{const{isLoaded:e=!0,searchParam:s={},dataKey:h,totalKey:y}=a,[l,f]=A(n,{isShowMessage:!1}),r=j({data:[],total:0}),{page:d}=R(()=>t()),t=async()=>{const u=await f(m(p({},s),{page:d.value}));u&&u.data?(r.data=(u.data[h]||[]).map(_=>F(a.transform)?a.transform(_):_),r.total=u.data[y]||1):(r.data=[],r.total=0)};return e&&I(async()=>{await t()}),m(p({isLoading:l,currentPage:d},O(r)),{getTableData:t})};export{X as _,$ as u};
